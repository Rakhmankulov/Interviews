## Ansible  

**Inventory** — файл конфигурации, где определяется информация о хосте. Хранится в папке /etc/ansible/hosts

**Плейбуки** - в плейбуках Ansible мы определяем, как применять политики, объявлять конфигурации, оркестрировать действия и запускать задачи на серверах — синхронно или асинхронно. Плейбук может включать один `play` или несколько.  

**Play** — компонент плейбука, который состоит из группы задач, выполняемых на определённых хостах. Каждый `play` должен указывать хост или группу хостов. Пример:  

```bash
-hosts: all # здесь мы указываем все хосты. 
```

Задачи (task) — это отдельные действия, которые выполняются плейбуками. Например:  
```bash
- name: Install Apache httpd # Определение задачи может содержать модули, 
например yum, git, service и copy.
```  

**Роли** в Ansible назначаются группе хостов и помогают организовать задачи по автоматизации. Мы можем создать несколько ролей и назначить их группе задач. Допустим, роль webserver можно использовать для установки Apache и Varnish на указанной группе серверов.  

**Обработчики** (handler) похожи на задачи, но выполняются только при вызове из события. Например, обработчик может запустить сервис httpd после того, как его установила задача. Обработчик вызывается директивой notify. Важно! Имя директивы notify и обработчика должны совпадать.  

**Шаблоны** Файлы шаблонов `(template)` основаны на шаблонизаторе `Python Jinja2` и имеют расширение `.j2`. В файл шаблона при желании можно поместить содержимое файла `index.html`, но эффективнее всего использовать в них переменные и факты.  

**Переменные** В плейбуки можно включать собственные переменные. Есть пять способов определить переменную:  

1. В play, в атрибуте vars_files:  
```bash
vars_files:
- "/path/to/var/file"
```
2. В <role>/vars/apache-install.yml
3. В командной строке:  
```bash
# ansible-playbook apache-install.yml -e "http-port=80"
```
4. В `play` через vars:  
```bash
vars: http_port: 80
```
5. В каталоге group_vars/  

**Приоритеты переменных** https://docs.ansible.com/ansible/latest/playbook_guide/playbooks_variables.html#understanding-variable-precedence  