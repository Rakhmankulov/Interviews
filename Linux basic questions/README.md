# Linux база  
1. [Загрузка системы](#Загрузка-системы)  
2. [Что происходит, когда выполняестя команда `curl https://ya.ru`](#Что-происходит,-когда-выполняестя-команда-`curl-https://ya.ru`)  

> Ты сказал что ты шаришь в этой теме (с) Мужик в красной куртке  
# Загрузка системы

# Что происходит, когда выполняестя команда `curl https://ya.ru`?  

1. Вызывается утилита `curl`, которая определяется по адресу `/usr/bin/curl` на нашем хосте  
2. Утилита `curl` разбирает https://ya.ru на протокол, домен, запрос и формирует HTTP запрос. Url может состоять из `протокола://www.хоста.com:порта/пути/до/страницы?и&запроса`   
3. Минимальный запрос из **стартовой строки**, **заголовков** и **тела запроса**  
  - **Стартовая строка**, пример: GET / HTTP/1.1  
  > GET  - запрашивает содержимое ресурса  
    HEAD - запрашивает ресурс так же, как и метод GET, но без тела ответа  
    POST - отправляет изменения на определённый ресурс  
    PUT  - заменяет все текущие представления ресурса данными запроса  
    DELETE  - удаляет указанный ресурс  
    CONNECT - устанавливает "туннель" к серверу, определённому по ресурсу  
    OPTIONS - используется для описания параметров соединения с ресурсом  
    TRACE   - выполняет вызов возвращаемого тестового сообщения с ресурса  
    PATCH   - используется для частичного изменения ресурса  
4. Для установки соединения необходимо преобразовать доменное имя в IP-адрес. Для этого утилита проверяет следующие ресурсы по порядку:  
  - Файл `/etc/hosts`  
  - Файл `/etc/resolv.conf`  
  - Проверяет кэш операционной системы  
  - Если в кэше операционной системы ничего нет, идет обращение к DNS серверу по-умолчанию  
5. `DNS` использует `53 порт`, протоколы `UDP/TCP`  
  - По `UDP` `DNS` имеет ограничение на размер запроса в **512 байт** для невозможности `DDOS атаки` по `UDP`  
6. После получения IP-адреса, на транспортном уровне устанавливается `HTTP/HTTPS` соединение  
7. В `HTTPS` соединение происходит как в `HTTP`, только поверх `TSL|SSL`  
8. `TSL|SSL` соединение: клиент сверяет полученную информацию с авторизованным центром сертификации `CA`, если все в порядке, клиент генерирует сеансовый ключ, шифрует публичной частью `SSL` сертификата и отправляет его на сервер. Сервер расшифровывает сообщение и сохраняет сеансовый ключ. После этого между браузером и сайтом устанавливается безопасное соединение по протоколу `HTTPS`  
Протокол IP 